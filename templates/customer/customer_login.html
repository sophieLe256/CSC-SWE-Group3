{% extends 'base.html' %}

{% block content %}
<style>
    /* Existing styles */
    .tab-container {
        display: flex;
        flex-direction: row;
    }

    .tab-sidebar {
        background-color: #f0f0f0;
        padding: 20px;
        width: 200px;
    }

    .tab-sidebar a {
        display: block;
        padding: 10px;
        text-decoration: none;
        color: #333;
    }

    .tab-sidebar a.active {
        background-color: #ccc;
    }

    .tab-content {
        flex-grow: 1;
        padding: 20px;
    }
</style>

<div class="tab-container">
    <div class="tab-sidebar">
        <a href="#" class="active" data-tab="track-shipments">Track Shipments</a>
        <a href="#" data-tab="new-order">New Order</a>
    </div>
    <div class="tab-content">
        <div id="track-shipments">
            <h2>Track Shipments</h2>
            <!-- Existing active shipments code -->
            {% if active_shipments %}
            <table>
                <thead>
                    <tr>
                        <th>Tracking Number</th>
                        <th>Status</th>
                        <th>Last Updated</th>
                    </tr>
                </thead>
                <tbody>
                    {% for shipment in active_shipments %}
                    <tr>
                        <td>{{ shipment.tracking_number }}</td>
                        <td>{{ shipment.status }}</td>
                        <td>{{ shipment.updated_at }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p>No active shipments.</p>
            {% endif %}

            <h3>Track a New Shipment</h3>
            <form method="post" action="{% url 'package-status' %}">
                {% csrf_token %}
                <label for="tracking_number">Tracking Number:</label>
                <input type="text" id="tracking_number" name="tracking_number" required>
                <button type="submit">Track</button>
            </form>
        </div>
        <div id="new-order" style="display: none;">
            <h2>New Order</h2>
            <!-- Order form code -->
        </div>
    </div>
</div>

<script>
    const tabLinks = document.querySelectorAll('.tab-sidebar a');
    const tabContents = document.querySelectorAll('.tab-content > div');

    function showTab(tabId) {
        tabContents.forEach(content => {
            content.style.display = 'none';
        });
        document.querySelector(`#${tabId}`).style.display = 'block';

        tabLinks.forEach(link => {
            link.classList.remove('active');
        });
        document.querySelector(`.tab-sidebar a[data-tab="${tabId}"]`).classList.add('active');
    }

    tabLinks.forEach(link => {
        link.addEventListener('click', (event) => {
            event.preventDefault();
            const tabId = event.target.dataset.tab;
            showTab(tabId);
        });
    });

    // Show the initial tab
    showTab('track-shipments');
</script>
{% endblock %}